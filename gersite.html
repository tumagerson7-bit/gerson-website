<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FOLIO ‚Äî Custom Stationery Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #F7F5F2;
  --ink: #1A1814;
  --muted: #8C8880;
  --accent: #C8A96E;
  --light: #EDE9E3;
  --white: #FDFCFB;
  --green: #2D6A4F;
  --red: #8B2020;
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }
body { font-family:'DM Mono',monospace; background:var(--bg); color:var(--ink); overflow-x:hidden; }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast-container { position:fixed; bottom:32px; right:32px; z-index:9999; display:flex; flex-direction:column; gap:10px; }
.toast {
  padding:14px 22px; font-size:11px; letter-spacing:.1em; border-left:3px solid var(--accent);
  background:var(--white); color:var(--ink); box-shadow:0 8px 32px rgba(0,0,0,.12);
  transform:translateX(120%); opacity:0; transition:all .35s cubic-bezier(.25,.46,.45,.94);
  max-width:300px;
}
.toast.show { transform:translateX(0); opacity:1; }
.toast.success { border-color:var(--green); }
.toast.error { border-color:var(--red); }

/* ‚îÄ‚îÄ LOADING OVERLAY ‚îÄ‚îÄ */
.page-loader {
  position:fixed; inset:0; background:var(--bg); z-index:9998;
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:16px;
  transition:opacity .4s; pointer-events:none;
}
.page-loader.hidden { opacity:0; }
.loader-logo { font-family:'Cormorant Garamond',serif; font-size:32px; font-weight:300; letter-spacing:.4em; text-transform:uppercase; }
.loader-bar { width:160px; height:1px; background:var(--light); position:relative; overflow:hidden; }
.loader-bar::after { content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:var(--accent); animation:loaderSlide 1.2s ease forwards; }
@keyframes loaderSlide { to { left:100%; } }

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
nav {
  position:fixed; top:0; left:0; right:0; z-index:100;
  display:flex; justify-content:space-between; align-items:center;
  padding:22px 48px; background:var(--bg);
  border-bottom:1px solid transparent; transition:border-color .3s, padding .3s;
}
nav.scrolled { border-color:var(--light); padding:16px 48px; }
.nav-logo { font-family:'Cormorant Garamond',serif; font-size:22px; font-weight:300; letter-spacing:.3em; text-transform:uppercase; cursor:pointer; }
.nav-links { display:flex; gap:36px; list-style:none; align-items:center; }
.nav-links a { font-size:11px; letter-spacing:.15em; text-transform:uppercase; text-decoration:none; color:var(--muted); transition:color .2s; cursor:pointer; }
.nav-links a:hover, .nav-links a.active { color:var(--ink); }
.nav-badge { position:relative; }
.nav-badge .badge {
  position:absolute; top:-8px; right:-12px; background:var(--accent);
  color:var(--white); font-size:8px; width:16px; height:16px; border-radius:50%;
  display:flex; align-items:center; justify-content:center; font-weight:400;
}

/* ‚îÄ‚îÄ PAGE TRANSITIONS ‚îÄ‚îÄ */
.page { display:none; animation:pageIn .4s ease forwards; }
.page.active { display:block; }
@keyframes pageIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
#hero { min-height:100vh; display:grid; grid-template-columns:1fr 1fr; padding-top:80px; }
.hero-left { display:flex; flex-direction:column; justify-content:center; padding:80px 48px; }
.hero-eyebrow { font-size:11px; letter-spacing:.2em; text-transform:uppercase; color:var(--muted); margin-bottom:32px; opacity:0; animation:fadeUp .8s .2s forwards; }
.hero-title { font-family:'Cormorant Garamond',serif; font-size:clamp(52px,6vw,88px); font-weight:300; line-height:1.0; margin-bottom:32px; opacity:0; animation:fadeUp .9s .4s forwards; }
.hero-title em { font-style:italic; color:var(--accent); }
.hero-desc { font-size:12px; line-height:1.9; color:var(--muted); max-width:360px; margin-bottom:48px; opacity:0; animation:fadeUp .9s .6s forwards; }
.hero-ctas { display:flex; gap:16px; flex-wrap:wrap; opacity:0; animation:fadeUp .9s .8s forwards; }
.hero-right { background:var(--light); position:relative; overflow:hidden; display:flex; align-items:center; justify-content:center; opacity:0; animation:fadeIn 1.2s .3s forwards; }
.hero-visual { width:300px; height:400px; background:var(--white); box-shadow:24px 24px 0 var(--accent); display:flex; flex-direction:column; justify-content:flex-end; padding:40px; position:relative; }
.hero-visual::before { content:''; position:absolute; top:28px; left:28px; width:60px; height:1px; background:var(--accent); }
.paper-lines { position:absolute; inset:0; display:flex; flex-direction:column; justify-content:flex-end; padding:80px 40px 40px; gap:18px; }
.paper-line { height:1px; background:var(--light); width:100%; transform:scaleX(0); transform-origin:left; animation:lineIn .6s forwards; }
.paper-line:nth-child(1){animation-delay:.8s} .paper-line:nth-child(2){animation-delay:.9s;width:80%} .paper-line:nth-child(3){animation-delay:1s} .paper-line:nth-child(4){animation-delay:1.1s;width:60%} .paper-line:nth-child(5){animation-delay:1.2s} .paper-line:nth-child(6){animation-delay:1.3s;width:70%}
.paper-tag { font-size:9px; letter-spacing:.2em; text-transform:uppercase; color:var(--muted); }
.paper-tag span { color:var(--accent); }
.hero-stats { display:flex; gap:0; border-top:1px solid var(--light); padding:48px 48px 80px; }
.stat { flex:1; opacity:0; animation:fadeUp .8s forwards; }
.stat:nth-child(1){animation-delay:1s} .stat:nth-child(2){animation-delay:1.1s;border-left:1px solid var(--light);padding-left:32px} .stat:nth-child(3){animation-delay:1.2s;border-left:1px solid var(--light);padding-left:32px}
.stat-num { font-family:'Cormorant Garamond',serif; font-size:36px; font-weight:300; }
.stat-label { font-size:10px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); margin-top:4px; }

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn-primary { padding:14px 32px; background:var(--ink); color:var(--white); font-family:'DM Mono',monospace; font-size:11px; letter-spacing:.15em; text-transform:uppercase; border:none; cursor:pointer; transition:background .2s; }
.btn-primary:hover { background:var(--accent); }
.btn-primary:disabled { opacity:.4; cursor:not-allowed; }
.btn-ghost { padding:14px 32px; background:transparent; color:var(--ink); font-family:'DM Mono',monospace; font-size:11px; letter-spacing:.15em; text-transform:uppercase; border:1px solid var(--ink); cursor:pointer; transition:all .2s; }
.btn-ghost:hover { background:var(--ink); color:var(--white); }
.btn-sm { padding:8px 16px; font-size:10px; }

/* ‚îÄ‚îÄ WORK PAGE ‚îÄ‚îÄ */
.section-header { display:flex; justify-content:space-between; align-items:flex-end; padding:100px 48px 48px; }
.section-eyebrow { font-size:10px; letter-spacing:.2em; text-transform:uppercase; color:var(--muted); margin-bottom:12px; }
.section-title { font-family:'Cormorant Garamond',serif; font-size:48px; font-weight:300; }
.filter-tabs { display:flex; gap:8px; flex-wrap:wrap; }
.tab { padding:8px 20px; font-family:'DM Mono',monospace; font-size:10px; letter-spacing:.12em; text-transform:uppercase; background:none; border:1px solid var(--light); cursor:pointer; color:var(--muted); transition:all .2s; }
.tab.active, .tab:hover { background:var(--ink); color:var(--white); border-color:var(--ink); }
.work-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:2px; padding:0 48px 100px; }
.work-item { background:var(--light); aspect-ratio:3/4; position:relative; overflow:hidden; cursor:pointer; }
.work-item:nth-child(2){margin-top:48px} .work-item:nth-child(3){margin-top:-48px} .work-item:nth-child(5){margin-top:-24px} .work-item:nth-child(6){margin-top:24px}
.work-inner { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; transition:transform .5s cubic-bezier(.25,.46,.45,.94); }
.work-item:hover .work-inner { transform:scale(1.04); }
.work-mockup { width:120px; height:160px; background:var(--white); box-shadow:8px 8px 0 rgba(0,0,0,.06); position:relative; display:flex; flex-direction:column; padding:20px; gap:10px; }
.mock-line { height:1px; background:var(--light); } .mock-line.short { width:60%; }
.mock-dot { width:8px; height:8px; background:var(--accent); border-radius:50%; position:absolute; top:16px; right:16px; }
.work-overlay { position:absolute; inset:0; background:var(--ink); display:flex; flex-direction:column; justify-content:flex-end; padding:32px; opacity:0; transition:opacity .3s; }
.work-item:hover .work-overlay { opacity:.92; }
.work-overlay h3 { font-family:'Cormorant Garamond',serif; color:var(--white); font-size:22px; font-weight:300; margin-bottom:6px; }
.work-overlay p { font-size:10px; letter-spacing:.12em; text-transform:uppercase; color:var(--accent); }

/* ‚îÄ‚îÄ ORDER FORM ‚îÄ‚îÄ */
.order-layout { min-height:100vh; padding-top:100px; display:grid; grid-template-columns:1fr 420px; }
.order-form-wrap { padding:60px 48px; border-right:1px solid var(--light); }
.order-summary-wrap { padding:60px 40px; background:var(--white); position:sticky; top:80px; align-self:start; max-height:calc(100vh - 80px); overflow-y:auto; }
.form-section { margin-bottom:40px; }
.form-section-title { font-size:10px; letter-spacing:.2em; text-transform:uppercase; color:var(--muted); margin-bottom:24px; display:flex; align-items:center; gap:16px; }
.form-section-title::after { content:''; flex:1; height:1px; background:var(--light); }
.form-row { display:flex; gap:16px; margin-bottom:16px; }
.form-group { flex:1; display:flex; flex-direction:column; gap:8px; }
label { font-size:10px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); }
input, select, textarea { padding:12px 16px; background:transparent; border:1px solid var(--light); font-family:'DM Mono',monospace; font-size:12px; color:var(--ink); outline:none; transition:border-color .2s; -webkit-appearance:none; width:100%; }
input:focus, select:focus, textarea:focus { border-color:var(--ink); }
textarea { resize:vertical; min-height:100px; }
input.error, select.error, textarea.error { border-color:var(--red); }
.field-error { font-size:9px; color:var(--red); letter-spacing:.05em; margin-top:4px; }
.product-cards { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:16px; }
.product-card { border:1px solid var(--light); padding:20px 16px; cursor:pointer; transition:all .2s; text-align:center; user-select:none; }
.product-card:hover, .product-card.selected { border-color:var(--ink); background:var(--ink); color:var(--white); }
.product-card input[type="radio"] { display:none; }
.product-icon { font-size:22px; margin-bottom:8px; display:block; }
.product-name { font-size:10px; letter-spacing:.1em; text-transform:uppercase; display:block; }
.color-swatches { display:flex; gap:10px; flex-wrap:wrap; }
.swatch { width:36px; height:36px; border-radius:50%; cursor:pointer; border:2px solid transparent; transition:border-color .2s; }
.swatch.selected { border-color:var(--ink); outline:2px solid var(--bg); outline-offset:2px; }
.progress-steps { display:flex; margin-bottom:48px; border:1px solid var(--light); }
.step { flex:1; padding:12px 8px; text-align:center; font-size:9px; letter-spacing:.1em; text-transform:uppercase; color:var(--muted); border-right:1px solid var(--light); cursor:pointer; transition:all .2s; }
.step:last-child { border-right:none; }
.step.active { background:var(--ink); color:var(--white); }
.step.done { color:var(--accent); background:rgba(200,169,110,.08); }
.summary-title { font-family:'Cormorant Garamond',serif; font-size:28px; font-weight:300; margin-bottom:32px; }
.summary-item { display:flex; justify-content:space-between; padding:12px 0; border-bottom:1px solid var(--light); font-size:11px; }
.summary-item-label { color:var(--muted); }
.summary-total { display:flex; justify-content:space-between; padding:20px 0 32px; font-family:'Cormorant Garamond',serif; font-size:24px; }

/* ‚îÄ‚îÄ AI ASSISTANT ‚îÄ‚îÄ */
.ai-panel {
  position:fixed; bottom:32px; right:32px; z-index:500; width:380px;
  background:var(--white); border:1px solid var(--light);
  box-shadow:0 24px 64px rgba(0,0,0,.12); transform:translateY(120%); opacity:0;
  transition:all .4s cubic-bezier(.25,.46,.45,.94);
}
.ai-panel.open { transform:translateY(0); opacity:1; }
.ai-header { padding:20px 24px; border-bottom:1px solid var(--light); display:flex; justify-content:space-between; align-items:center; background:var(--ink); color:var(--white); }
.ai-header-title { font-size:11px; letter-spacing:.15em; text-transform:uppercase; }
.ai-header-sub { font-size:9px; color:rgba(255,255,255,.5); letter-spacing:.1em; margin-top:3px; }
.ai-close { background:none; border:none; color:rgba(255,255,255,.6); cursor:pointer; font-size:18px; line-height:1; transition:color .2s; }
.ai-close:hover { color:var(--white); }
.ai-messages { height:280px; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:12px; scroll-behavior:smooth; }
.ai-msg { max-width:85%; padding:12px 16px; font-size:11px; line-height:1.7; }
.ai-msg.user { background:var(--ink); color:var(--white); align-self:flex-end; }
.ai-msg.assistant { background:var(--light); color:var(--ink); align-self:flex-start; }
.ai-msg.loading { align-self:flex-start; }
.typing-dots { display:flex; gap:4px; align-items:center; padding:12px 16px; background:var(--light); }
.typing-dots span { width:5px; height:5px; background:var(--muted); border-radius:50%; animation:typingBounce 1s ease-in-out infinite; }
.typing-dots span:nth-child(2){animation-delay:.15s} .typing-dots span:nth-child(3){animation-delay:.3s}
@keyframes typingBounce { 0%,60%,100%{transform:translateY(0)} 30%{transform:translateY(-6px)} }
.ai-input-row { padding:16px; border-top:1px solid var(--light); display:flex; gap:10px; }
.ai-input { flex:1; padding:10px 14px; border:1px solid var(--light); font-family:'DM Mono',monospace; font-size:11px; background:transparent; outline:none; }
.ai-input:focus { border-color:var(--ink); }
.ai-send { padding:10px 18px; background:var(--accent); color:var(--white); border:none; font-family:'DM Mono',monospace; font-size:10px; letter-spacing:.1em; cursor:pointer; transition:background .2s; }
.ai-send:hover { background:var(--ink); }
.ai-send:disabled { opacity:.4; cursor:not-allowed; }
.ai-quick-btns { padding:0 16px 12px; display:flex; gap:8px; flex-wrap:wrap; }
.ai-quick { padding:6px 12px; font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.08em; background:none; border:1px solid var(--light); cursor:pointer; color:var(--muted); transition:all .2s; }
.ai-quick:hover { border-color:var(--ink); color:var(--ink); }

/* AI Trigger button */
.ai-trigger {
  position:fixed; bottom:32px; right:32px; z-index:499;
  width:54px; height:54px; border-radius:50%; background:var(--ink); border:none;
  cursor:pointer; display:flex; align-items:center; justify-content:center;
  box-shadow:0 8px 24px rgba(0,0,0,.2); transition:all .2s; font-size:22px;
}
.ai-trigger:hover { background:var(--accent); transform:scale(1.05); }
.ai-trigger.hidden { opacity:0; pointer-events:none; }

/* ‚îÄ‚îÄ ADMIN DASHBOARD ‚îÄ‚îÄ */
.admin-layout { padding-top:80px; min-height:100vh; }
.admin-header { padding:60px 48px 32px; border-bottom:1px solid var(--light); display:flex; justify-content:space-between; align-items:flex-end; }
.admin-header-right { display:flex; gap:12px; align-items:center; }
.admin-tabs { display:flex; border-bottom:1px solid var(--light); }
.admin-tab { padding:16px 32px; font-size:10px; letter-spacing:.15em; text-transform:uppercase; cursor:pointer; border:none; background:none; color:var(--muted); border-bottom:2px solid transparent; margin-bottom:-1px; transition:all .2s; }
.admin-tab.active { color:var(--ink); border-bottom-color:var(--ink); }
.admin-content { padding:40px 48px; }

/* Stats cards */
.stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-bottom:48px; }
.stat-card { background:var(--white); border:1px solid var(--light); padding:28px; transition:box-shadow .2s; }
.stat-card:hover { box-shadow:0 4px 20px rgba(0,0,0,.06); }
.stat-card-num { font-family:'Cormorant Garamond',serif; font-size:42px; font-weight:300; margin-bottom:6px; }
.stat-card-label { font-size:10px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); }
.stat-card-change { font-size:10px; margin-top:12px; }
.stat-card-change.up { color:var(--green); }
.stat-card-change.down { color:var(--red); }

/* Orders table */
.orders-table { width:100%; border-collapse:collapse; }
.orders-table th { font-size:9px; letter-spacing:.15em; text-transform:uppercase; color:var(--muted); padding:12px 16px; text-align:left; border-bottom:2px solid var(--light); }
.orders-table td { padding:16px; font-size:11px; border-bottom:1px solid var(--light); vertical-align:middle; }
.orders-table tr:hover td { background:rgba(237,233,227,.4); }
.status-badge { display:inline-block; padding:4px 12px; font-size:9px; letter-spacing:.1em; text-transform:uppercase; border-radius:2px; }
.status-badge.new { background:rgba(200,169,110,.15); color:#9a7040; }
.status-badge.in-progress { background:rgba(45,106,79,.12); color:var(--green); }
.status-badge.completed { background:rgba(26,24,20,.08); color:var(--ink); }
.status-badge.pending { background:rgba(139,32,32,.1); color:var(--red); }
.action-btns { display:flex; gap:8px; }
.action-btn { padding:5px 12px; font-family:'DM Mono',monospace; font-size:9px; letter-spacing:.08em; border:1px solid var(--light); background:none; cursor:pointer; transition:all .15s; color:var(--muted); }
.action-btn:hover { border-color:var(--ink); color:var(--ink); }
.action-btn.danger:hover { border-color:var(--red); color:var(--red); }

/* Portfolio manager */
.portfolio-grid-admin { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; }
.portfolio-item-admin { border:1px solid var(--light); padding:24px; background:var(--white); position:relative; }
.portfolio-item-admin h4 { font-size:12px; margin-bottom:4px; }
.portfolio-item-admin p { font-size:10px; color:var(--muted); margin-bottom:16px; }
.add-portfolio-card { border:1px dashed var(--light); padding:40px 24px; display:flex; align-items:center; justify-content:center; cursor:pointer; flex-direction:column; gap:12px; color:var(--muted); transition:all .2s; }
.add-portfolio-card:hover { border-color:var(--accent); color:var(--accent); }

/* Modal */
.modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:800; display:none; align-items:center; justify-content:center; padding:24px; }
.modal-overlay.open { display:flex; }
.modal { background:var(--white); max-width:580px; width:100%; max-height:85vh; overflow-y:auto; animation:modalIn .25s ease; }
@keyframes modalIn { from{transform:scale(.96);opacity:0} to{transform:scale(1);opacity:1} }
.modal-header { padding:28px 32px 20px; border-bottom:1px solid var(--light); display:flex; justify-content:space-between; align-items:center; }
.modal-title { font-family:'Cormorant Garamond',serif; font-size:26px; font-weight:300; }
.modal-close { background:none; border:none; font-size:22px; cursor:pointer; color:var(--muted); }
.modal-body { padding:32px; }
.modal-footer { padding:20px 32px; border-top:1px solid var(--light); display:flex; justify-content:flex-end; gap:12px; }

/* About & Contact preserved */
.about-layout { min-height:100vh; padding-top:80px; display:grid; grid-template-columns:1fr 1fr; }
.about-visual { background:var(--ink); position:relative; overflow:hidden; display:flex; align-items:center; justify-content:center; min-height:600px; }
.about-quote { font-family:'Cormorant Garamond',serif; font-size:36px; font-weight:300; line-height:1.3; color:var(--white); padding:80px; position:relative; z-index:1; }
.about-quote em { color:var(--accent); font-style:italic; }
.about-visual::before { content:'FOLIO'; position:absolute; font-family:'Cormorant Garamond',serif; font-size:200px; font-weight:300; color:rgba(255,255,255,.03); letter-spacing:-.05em; }
.about-content { padding:80px 60px; display:flex; flex-direction:column; justify-content:center; }
.about-content p { font-size:12px; line-height:2; color:var(--muted); margin-bottom:24px; max-width:440px; }
.process-list { margin-top:40px; }
.process-item { display:flex; gap:24px; align-items:flex-start; padding:20px 0; border-top:1px solid var(--light); }
.process-num { font-family:'Cormorant Garamond',serif; font-size:32px; font-weight:300; color:var(--accent); line-height:1; min-width:40px; }
.process-text h4 { font-size:11px; letter-spacing:.12em; text-transform:uppercase; margin-bottom:6px; }
.process-text p { font-size:11px; color:var(--muted); line-height:1.7; margin:0; }
.contact-layout { min-height:100vh; padding-top:80px; display:flex; align-items:center; justify-content:center; flex-direction:column; padding-bottom:80px; }
.contact-wrap { width:100%; max-width:560px; padding:60px 48px; background:var(--white); border:1px solid var(--light); }

footer { border-top:1px solid var(--light); padding:32px 48px; display:flex; justify-content:space-between; align-items:center; font-size:10px; letter-spacing:.1em; color:var(--muted); }

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes fadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
@keyframes lineIn { to{transform:scaleX(1)} }

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:900px){
  nav{padding:20px 24px}
  .nav-links{display:none}
  #hero{grid-template-columns:1fr}
  .hero-right{min-height:260px}
  .hero-left{padding:60px 24px}
  .hero-stats{padding:32px 24px 60px}
  .work-grid{grid-template-columns:1fr 1fr;padding:0 24px 60px}
  .work-item:nth-child(n){margin-top:0}
  .order-layout{grid-template-columns:1fr}
  .order-summary-wrap{position:static}
  .about-layout{grid-template-columns:1fr}
  .section-header{flex-direction:column;align-items:flex-start;gap:24px;padding:60px 24px 32px}
  .order-form-wrap{padding:40px 24px}
  .stats-row{grid-template-columns:1fr 1fr}
  .admin-content{padding:24px}
  .admin-header{padding:48px 24px 24px;flex-direction:column;gap:16px;align-items:flex-start}
  .portfolio-grid-admin{grid-template-columns:1fr 1fr}
  footer{flex-direction:column;gap:12px;text-align:center;padding:24px}
  .contact-wrap{margin:0 24px;padding:40px 24px}
  .about-content{padding:48px 24px}
  .product-cards{grid-template-columns:1fr 1fr}
  .ai-panel{width:calc(100vw - 48px);right:24px}
}
</style>
</head>
<body>

<!-- Page Loader -->
<div class="page-loader" id="pageLoader">
  <div class="loader-logo">Folio</div>
  <div class="loader-bar"></div>
</div>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<!-- NAV -->
<nav id="nav">
  <div class="nav-logo" onclick="showPage('home')">Folio</div>
  <ul class="nav-links">
    <li><a class="active" onclick="showPage('home',this)">Home</a></li>
    <li><a onclick="showPage('work',this)">Work</a></li>
    <li><a onclick="showPage('order',this)" class="nav-badge">Order <span class="badge" id="cartBadge" style="display:none">0</span></a></li>
    <li><a onclick="showPage('about',this)">About</a></li>
    <li><a onclick="showPage('contact',this)">Contact</a></li>
    <li><a onclick="showPage('admin',this)" style="color:var(--accent)">Admin ‚Üó</a></li>
  </ul>
</nav>

<!-- AI Assistant -->
<button class="ai-trigger" id="aiTrigger" onclick="toggleAI()" title="Ask our AI assistant">‚ú¶</button>
<div class="ai-panel" id="aiPanel">
  <div class="ai-header">
    <div>
      <div class="ai-header-title">Folio Assistant</div>
      <div class="ai-header-sub">Powered by Claude ¬∑ Ask me anything</div>
    </div>
    <button class="ai-close" onclick="toggleAI()">√ó</button>
  </div>
  <div class="ai-messages" id="aiMessages">
    <div class="ai-msg assistant">Hello! I'm here to help with your custom stationery. Ask me about paper types, design ideas, pricing, turnaround times, or anything else. ‚ú¶</div>
  </div>
  <div class="ai-quick-btns">
    <button class="ai-quick" onclick="aiQuick('What paper types do you offer?')">Paper types</button>
    <button class="ai-quick" onclick="aiQuick('How long does an order take?')">Turnaround</button>
    <button class="ai-quick" onclick="aiQuick('Help me design business cards')">Design help</button>
    <button class="ai-quick" onclick="aiQuick('What are your pricing tiers?')">Pricing</button>
  </div>
  <div class="ai-input-row">
    <input class="ai-input" id="aiInput" placeholder="Ask a question..." onkeydown="if(event.key==='Enter')sendAI()">
    <button class="ai-send" id="aiSendBtn" onclick="sendAI()">Send</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HOME ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-home" class="page active">
  <section id="hero">
    <div class="hero-left">
      <p class="hero-eyebrow">Custom Stationery Studio ‚Äî Est. 2024</p>
      <h1 class="hero-title">Paper,<br><em>refined.</em></h1>
      <p class="hero-desc">We design and craft custom stationery that speaks before you do. Every piece is made to order ‚Äî minimal, intentional, and entirely yours.</p>
      <div class="hero-ctas">
        <button class="btn-primary" onclick="showPage('order')">Start an Order</button>
        <button class="btn-ghost" onclick="showPage('work')">View Work</button>
      </div>
    </div>
    <div class="hero-right">
      <div class="hero-visual">
        <div class="paper-lines">
          <div class="paper-line"></div><div class="paper-line"></div><div class="paper-line"></div>
          <div class="paper-line"></div><div class="paper-line"></div><div class="paper-line"></div>
        </div>
        <p class="paper-tag"><span>Custom</span> ‚Äî Letterpress Card</p>
      </div>
    </div>
  </section>
  <div class="hero-stats">
    <div class="stat"><div class="stat-num" id="statOrders">0</div><div class="stat-label">Orders Completed</div></div>
    <div class="stat"><div class="stat-num">14</div><div class="stat-label">Days Avg Turnaround</div></div>
    <div class="stat"><div class="stat-num">100%</div><div class="stat-label">Bespoke Design</div></div>
  </div>
  <footer><span>¬© 2024 Folio Studio</span><span>Custom Stationery & Design</span><span>hello@foliodesign.co</span></footer>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WORK ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-work" class="page">
  <div class="section-header">
    <div>
      <div class="section-eyebrow">Selected Projects</div>
      <h2 class="section-title">Our Work</h2>
    </div>
    <div class="filter-tabs" id="filterTabs">
      <button class="tab active" onclick="filterWork('all',this)">All</button>
      <button class="tab" onclick="filterWork('cards',this)">Cards</button>
      <button class="tab" onclick="filterWork('notebooks',this)">Notebooks</button>
      <button class="tab" onclick="filterWork('envelopes',this)">Envelopes</button>
      <button class="tab" onclick="filterWork('sets',this)">Sets</button>
    </div>
  </div>
  <div class="work-grid" id="workGrid"></div>
  <footer><span>¬© 2024 Folio Studio</span><span>Custom Stationery & Design</span><span>hello@foliodesign.co</span></footer>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ORDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-order" class="page">
  <div class="order-layout">
    <div class="order-form-wrap">
      <div class="progress-steps">
        <div class="step active" id="s1" onclick="goToStep(1)">01 Product</div>
        <div class="step" id="s2">02 Design</div>
        <div class="step" id="s3">03 Details</div>
        <div class="step" id="s4">04 Review</div>
      </div>
      <div id="form-step-1">
        <div class="form-section">
          <div class="form-section-title">Choose Product</div>
          <div class="product-cards">
            <label class="product-card selected" onclick="selectProduct(this,'Cards','$120')"><input type="radio" name="product" value="Cards" checked><span class="product-icon">üìÑ</span><span class="product-name">Cards</span></label>
            <label class="product-card" onclick="selectProduct(this,'Notebook','$180')"><input type="radio" name="product" value="Notebook"><span class="product-icon">üìì</span><span class="product-name">Notebook</span></label>
            <label class="product-card" onclick="selectProduct(this,'Envelope','$95')"><input type="radio" name="product" value="Envelope"><span class="product-icon">‚úâÔ∏è</span><span class="product-name">Envelope</span></label>
            <label class="product-card" onclick="selectProduct(this,'Notepad','$110')"><input type="radio" name="product" value="Notepad"><span class="product-icon">üóíÔ∏è</span><span class="product-name">Notepad</span></label>
            <label class="product-card" onclick="selectProduct(this,'Letterhead','$130')"><input type="radio" name="product" value="Letterhead"><span class="product-icon">üñäÔ∏è</span><span class="product-name">Letterhead</span></label>
            <label class="product-card" onclick="selectProduct(this,'Full Set','$380')"><input type="radio" name="product" value="Full Set"><span class="product-icon">üéÅ</span><span class="product-name">Full Set</span></label>
          </div>
        </div>
        <div class="form-section">
          <div class="form-section-title">Paper & Finish</div>
          <div class="form-row">
            <div class="form-group">
              <label>Paper Weight</label>
              <select id="paperWeight" onchange="updateSummary()">
                <option value="300gsm">300gsm ‚Äî Standard</option>
                <option value="400gsm" selected>400gsm ‚Äî Premium (+$20)</option>
                <option value="500gsm">500gsm ‚Äî Luxury (+$45)</option>
              </select>
            </div>
            <div class="form-group">
              <label>Finish</label>
              <select id="finishType" onchange="updateSummary()">
                <option>Uncoated Matte</option>
                <option>Soft Touch Matte</option>
                <option>Cotton Rag</option>
                <option>Letterpress Textured</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>Quantity</label>
            <select id="orderQty" onchange="updateSummary()">
              <option value="25">25 pieces ‚Äî base price</option>
              <option value="50" selected>50 pieces (+$30)</option>
              <option value="100">100 pieces (+$60)</option>
              <option value="250">250 pieces (+$120)</option>
              <option value="500">500 pieces (+$220)</option>
            </select>
          </div>
        </div>
        <button class="btn-primary" onclick="nextStep(2)">Continue ‚Üí</button>
      </div>
      <div id="form-step-2" style="display:none">
        <div class="form-section">
          <div class="form-section-title">Color Palette</div>
          <div class="color-swatches">
            <div class="swatch selected" style="background:#1A1814" onclick="selectSwatch(this,'Ink Black')" title="Ink Black"></div>
            <div class="swatch" style="background:#C8A96E" onclick="selectSwatch(this,'Gold')" title="Gold"></div>
            <div class="swatch" style="background:#8C8880" onclick="selectSwatch(this,'Warm Grey')" title="Warm Grey"></div>
            <div class="swatch" style="background:#2D4A3E" onclick="selectSwatch(this,'Forest Green')" title="Forest Green"></div>
            <div class="swatch" style="background:#7A3B2E" onclick="selectSwatch(this,'Terracotta')" title="Terracotta"></div>
            <div class="swatch" style="background:#EDE9E3;border:1px solid #ccc" onclick="selectSwatch(this,'Cream')" title="Cream"></div>
          </div>
        </div>
        <div class="form-section">
          <div class="form-section-title">Typography Style</div>
          <div class="product-cards" style="grid-template-columns:1fr 1fr">
            <label class="product-card selected" onclick="selectProduct(this,'Serif Elegant',null);orderData.typography='Serif Elegant'">
              <span class="product-icon" style="font-family:'Cormorant Garamond',serif;font-size:18px;font-style:italic">Aa</span>
              <span class="product-name">Serif Elegant</span>
            </label>
            <label class="product-card" onclick="selectProduct(this,'Mono Modern',null);orderData.typography='Mono Modern'">
              <span class="product-icon" style="font-family:'DM Mono',monospace;font-size:14px">Aa</span>
              <span class="product-name">Mono Modern</span>
            </label>
          </div>
        </div>
        <div class="form-section">
          <div class="form-section-title">Design Notes</div>
          <textarea id="designNotes" placeholder="Describe your vision ‚Äî any motifs, logos, or inspirations..." onchange="orderData.notes=this.value"></textarea>
          <button class="btn-ghost btn-sm" style="margin-top:12px" onclick="getAIDesignIdea()">‚ú¶ Get AI design suggestions</button>
        </div>
        <div style="display:flex;gap:16px;margin-top:32px">
          <button class="btn-ghost" onclick="nextStep(1)">‚Üê Back</button>
          <button class="btn-primary" onclick="nextStep(3)">Continue ‚Üí</button>
        </div>
      </div>
      <div id="form-step-3" style="display:none">
        <div class="form-section">
          <div class="form-section-title">Your Information</div>
          <div class="form-row">
            <div class="form-group">
              <label>First Name *</label>
              <input type="text" id="fname" placeholder="Jane">
            </div>
            <div class="form-group">
              <label>Last Name *</label>
              <input type="text" id="lname" placeholder="Doe">
            </div>
          </div>
          <div class="form-group" style="margin-bottom:16px">
            <label>Email *</label>
            <input type="email" id="email" placeholder="jane@studio.com">
          </div>
          <div class="form-group">
            <label>Company / Studio (optional)</label>
            <input type="text" id="company" placeholder="Doe Creative">
          </div>
        </div>
        <div class="form-section">
          <div class="form-section-title">Text Content</div>
          <div class="form-group" style="margin-bottom:16px">
            <label>Primary Text</label>
            <input type="text" id="primaryText" placeholder="Jane Doe ‚Äî Creative Director">
          </div>
          <div class="form-group" style="margin-bottom:16px">
            <label>Secondary Text</label>
            <input type="text" id="secondaryText" placeholder="hello@studio.com ¬∑ @janedoe">
          </div>
          <div class="form-group">
            <label>Additional Notes</label>
            <textarea id="extraNotes" placeholder="Anything else we should know..."></textarea>
          </div>
        </div>
        <div style="display:flex;gap:16px">
          <button class="btn-ghost" onclick="nextStep(2)">‚Üê Back</button>
          <button class="btn-primary" onclick="validateAndReview()">Review Order ‚Üí</button>
        </div>
      </div>
      <div id="form-step-4" style="display:none">
        <div class="form-section">
          <div class="form-section-title">Order Review</div>
          <p style="font-size:12px;color:var(--muted);line-height:1.8;margin-bottom:32px">Once submitted, our team will review your order and reach out within 24 hours to confirm details and share an initial proof.</p>
          <div style="background:var(--light);padding:28px;margin-bottom:32px" id="reviewDetails"></div>
        </div>
        <div style="display:flex;gap:16px">
          <button class="btn-ghost" onclick="nextStep(3)">‚Üê Back</button>
          <button class="btn-primary" id="submitBtn" onclick="submitOrder()">Submit Order ‚úì</button>
        </div>
      </div>
    </div>
    <div class="order-summary-wrap">
      <h3 class="summary-title">Order<br>Summary</h3>
      <div id="summaryItems">
        <div class="summary-item"><span class="summary-item-label">Product</span><span id="sum-product">Cards</span></div>
        <div class="summary-item"><span class="summary-item-label">Quantity</span><span id="sum-qty">50 pcs</span></div>
        <div class="summary-item"><span class="summary-item-label">Paper</span><span id="sum-paper">400gsm</span></div>
        <div class="summary-item"><span class="summary-item-label">Finish</span><span id="sum-finish">Soft Touch</span></div>
        <div class="summary-item"><span class="summary-item-label">Color</span><span id="sum-color">Ink Black</span></div>
        <div class="summary-item"><span class="summary-item-label">Turnaround</span><span>~14 days</span></div>
      </div>
      <div class="summary-total"><span>Est. Total</span><span id="sum-total">$185</span></div>
      <p style="font-size:10px;color:var(--muted);line-height:1.8">Final pricing confirmed after design consultation. No payment required until you approve the proof.</p>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ABOUT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-about" class="page">
  <div class="about-layout">
    <div class="about-visual">
      <blockquote class="about-quote">"Good design is<br><em>invisible</em>. Great<br>stationery speaks<br>before you do."</blockquote>
    </div>
    <div class="about-content">
      <div class="section-eyebrow" style="margin-bottom:16px">Our Story</div>
      <h2 class="section-title" style="margin-bottom:32px">Craft &<br>Intention</h2>
      <p>Folio was born from a simple belief: that the tactile experience of paper can carry meaning that screens cannot. We work with clients who want their stationery to feel as considered as their work.</p>
      <p>Every order is handled by our small team. No templates. No shortcuts. Just clean design and the finest paper.</p>
      <div class="process-list">
        <div class="process-item"><div class="process-num">01</div><div class="process-text"><h4>Consultation</h4><p>We start with a brief conversation about your vision, brand, and how you'll use your stationery.</p></div></div>
        <div class="process-item"><div class="process-num">02</div><div class="process-text"><h4>Design Proof</h4><p>Within 5 business days we deliver a digital proof for your review and revisions.</p></div></div>
        <div class="process-item"><div class="process-num">03</div><div class="process-text"><h4>Production</h4><p>Once approved, we produce your order using archival-quality materials and precision printing.</p></div></div>
        <div class="process-item"><div class="process-num">04</div><div class="process-text"><h4>Delivery</h4><p>Carefully packaged and shipped directly to your door, typically within 14 days of approval.</p></div></div>
      </div>
    </div>
  </div>
  <footer><span>¬© 2024 Folio Studio</span><span>Custom Stationery & Design</span><span>hello@foliodesign.co</span></footer>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONTACT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-contact" class="page">
  <div class="contact-layout">
    <div style="text-align:center;margin-bottom:48px">
      <div class="section-eyebrow" style="margin-bottom:12px">Get In Touch</div>
      <h2 class="section-title">Let's talk paper.</h2>
    </div>
    <div class="contact-wrap">
      <div class="form-section">
        <div class="form-section-title">Your Message</div>
        <div class="form-row">
          <div class="form-group"><label>Name</label><input type="text" id="cname" placeholder="Jane Doe"></div>
          <div class="form-group"><label>Email</label><input type="email" id="cemail" placeholder="jane@studio.com"></div>
        </div>
        <div class="form-group" style="margin-bottom:16px">
          <label>Subject</label>
          <select id="csubject">
            <option>Custom Order Inquiry</option>
            <option>Wholesale / Bulk</option>
            <option>Design Collaboration</option>
            <option>General Question</option>
          </select>
        </div>
        <div class="form-group" style="margin-bottom:32px">
          <label>Message</label>
          <textarea id="cmessage" placeholder="Tell us about your project..." style="min-height:140px"></textarea>
        </div>
        <button class="btn-primary" style="width:100%" onclick="sendContact()">Send Message ‚Üí</button>
      </div>
    </div>
    <div style="margin-top:48px;display:flex;gap:60px;font-size:11px;color:var(--muted);flex-wrap:wrap;justify-content:center">
      <div><div style="color:var(--ink);letter-spacing:.12em;font-size:10px;text-transform:uppercase;margin-bottom:8px">Email</div>hello@foliodesign.co</div>
      <div><div style="color:var(--ink);letter-spacing:.12em;font-size:10px;text-transform:uppercase;margin-bottom:8px">Response Time</div>Within 24 hours</div>
      <div><div style="color:var(--ink);letter-spacing:.12em;font-size:10px;text-transform:uppercase;margin-bottom:8px">Studio Hours</div>Mon‚ÄìFri, 9am‚Äì6pm</div>
    </div>
  </div>
  <footer><span>¬© 2024 Folio Studio</span><span>Custom Stationery & Design</span><span>hello@foliodesign.co</span></footer>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ADMIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-admin" class="page">
  <div class="admin-layout">
    <div class="admin-header">
      <div>
        <div class="section-eyebrow" style="margin-bottom:8px">Studio Management</div>
        <h2 class="section-title">Dashboard</h2>
      </div>
      <div class="admin-header-right">
        <button class="btn-ghost btn-sm" onclick="exportOrders()">‚Üì Export CSV</button>
        <button class="btn-primary btn-sm" onclick="openAddPortfolioModal()">+ Add Work</button>
      </div>
    </div>
    <div class="admin-tabs">
      <button class="admin-tab active" onclick="switchAdminTab('overview',this)">Overview</button>
      <button class="admin-tab" onclick="switchAdminTab('orders',this)">Orders</button>
      <button class="admin-tab" onclick="switchAdminTab('portfolio',this)">Portfolio</button>
      <button class="admin-tab" onclick="switchAdminTab('messages',this)">Messages</button>
    </div>
    <div class="admin-content">
      <!-- Overview -->
      <div id="admin-overview">
        <div class="stats-row">
          <div class="stat-card"><div class="stat-card-num" id="dash-total">0</div><div class="stat-card-label">Total Orders</div><div class="stat-card-change up" id="dash-change">‚Üë Loading...</div></div>
          <div class="stat-card"><div class="stat-card-num" id="dash-new">0</div><div class="stat-card-label">New Orders</div><div class="stat-card-change up">‚Üë This week</div></div>
          <div class="stat-card"><div class="stat-card-num" id="dash-revenue">$0</div><div class="stat-card-label">Est. Revenue</div><div class="stat-card-change up">‚Üë All time</div></div>
          <div class="stat-card"><div class="stat-card-num" id="dash-messages">0</div><div class="stat-card-label">Messages</div><div class="stat-card-change">Inbox</div></div>
        </div>
        <div style="margin-bottom:16px;display:flex;justify-content:space-between;align-items:center">
          <div class="section-eyebrow" style="padding:0">Recent Orders</div>
          <button class="btn-ghost btn-sm" onclick="switchAdminTab('orders',document.querySelector('.admin-tab:nth-child(2)'))">View All</button>
        </div>
        <div id="recentOrdersTable"></div>
      </div>
      <!-- Orders -->
      <div id="admin-orders" style="display:none">
        <div style="margin-bottom:24px;display:flex;gap:12px;align-items:center;flex-wrap:wrap">
          <input type="text" placeholder="Search orders..." style="max-width:280px" id="orderSearch" oninput="renderOrdersTable()">
          <select id="statusFilter" onchange="renderOrdersTable()" style="max-width:180px">
            <option value="">All Statuses</option>
            <option value="New">New</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
            <option value="Pending">Pending</option>
          </select>
        </div>
        <div id="ordersTableWrap"></div>
      </div>
      <!-- Portfolio -->
      <div id="admin-portfolio" style="display:none">
        <div class="portfolio-grid-admin" id="portfolioAdmin"></div>
      </div>
      <!-- Messages -->
      <div id="admin-messages" style="display:none">
        <div id="messagesWrap"></div>
      </div>
    </div>
  </div>
  <footer><span>¬© 2024 Folio Studio</span><span>Admin Panel</span><span>hello@foliodesign.co</span></footer>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- Order Detail Modal -->
<div class="modal-overlay" id="orderModal">
  <div class="modal">
    <div class="modal-header">
      <h3 class="modal-title" id="modalOrderTitle">Order #001</h3>
      <button class="modal-close" onclick="closeModal('orderModal')">√ó</button>
    </div>
    <div class="modal-body" id="modalOrderBody"></div>
    <div class="modal-footer">
      <button class="btn-ghost btn-sm" onclick="closeModal('orderModal')">Close</button>
      <button class="btn-primary btn-sm" id="modalUpdateBtn">Update Status</button>
    </div>
  </div>
</div>

<!-- Add Portfolio Modal -->
<div class="modal-overlay" id="portfolioModal">
  <div class="modal">
    <div class="modal-header">
      <h3 class="modal-title">Add Portfolio Item</h3>
      <button class="modal-close" onclick="closeModal('portfolioModal')">√ó</button>
    </div>
    <div class="modal-body">
      <div class="form-group" style="margin-bottom:16px"><label>Project Title *</label><input type="text" id="pTitle" placeholder="Maison Cards"></div>
      <div class="form-group" style="margin-bottom:16px"><label>Category</label>
        <select id="pCat"><option value="cards">Cards</option><option value="notebooks">Notebooks</option><option value="envelopes">Envelopes</option><option value="sets">Sets</option></select></div>
      <div class="form-group"><label>Description</label><textarea id="pDesc" placeholder="Brief description of the project..."></textarea></div>
    </div>
    <div class="modal-footer">
      <button class="btn-ghost btn-sm" onclick="closeModal('portfolioModal')">Cancel</button>
      <button class="btn-primary btn-sm" onclick="addPortfolioItem()">Add Item</button>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STATE & STORAGE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let orders = [];
let messages = [];
let portfolio = [];
let orderData = { product:'Cards', price:120, paper:'400gsm', finish:'Soft Touch Matte', color:'Ink Black', qty:50, typography:'Serif Elegant', notes:'', fname:'', lname:'', email:'', company:'', primaryText:'', secondaryText:'', extraNotes:'' };
let aiHistory = [];
let currentStep = 1;
let aiOpen = false;

const PRICES = { Cards:120, Notebook:180, Envelope:95, Notepad:110, Letterhead:130, 'Full Set':380 };
const PAPER_ADD = { '300gsm':0, '400gsm':20, '500gsm':45 };
const QTY_ADD = { '25':0, '50':30, '100':60, '250':120, '500':220 };

// Default portfolio data
const defaultPortfolio = [
  { id:'p1', title:'Maison Cards', cat:'cards', desc:'Luxury business cards for a Paris-based atelier' },
  { id:'p2', title:'Studio Berg', cat:'cards', desc:'Minimal letterhead set for a Berlin architecture studio' },
  { id:'p3', title:'Ode Notebook', cat:'notebooks', desc:'Custom linen-bound notebooks for a creative agency' },
  { id:'p4', title:'Vesper Suite', cat:'sets', desc:'Complete wedding stationery suite with envelope liners' },
  { id:'p5', title:'Kiral Identity', cat:'sets', desc:'Full brand stationery system for a boutique law firm' },
  { id:'p6', title:'Mono Press', cat:'cards', desc:'Letterpress business cards with debossed type' },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STORAGE (persistent)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function saveToStorage(key, val) {
  try { await window.storage.set(key, JSON.stringify(val)); } catch(e) {}
}
async function loadFromStorage(key) {
  try { const r = await window.storage.get(key); return r ? JSON.parse(r.value) : null; } catch(e) { return null; }
}

async function initStorage() {
  const savedOrders = await loadFromStorage('folio-orders');
  const savedMessages = await loadFromStorage('folio-messages');
  const savedPortfolio = await loadFromStorage('folio-portfolio');
  orders = savedOrders || [];
  messages = savedMessages || [];
  portfolio = savedPortfolio || defaultPortfolio;
  renderWorkGrid();
  updateDashboard();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window.addEventListener('load', async () => {
  await initStorage();
  setTimeout(() => {
    document.getElementById('pageLoader').classList.add('hidden');
  }, 1400);
  updateStatCounter();
});

window.addEventListener('scroll', () => {
  document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 40);
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showPage(name, el) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + name).classList.add('active');
  document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
  if (el) el.classList.add('active');
  else {
    const idx = ['home','work','order','about','contact','admin'].indexOf(name);
    const links = document.querySelectorAll('.nav-links a');
    if (links[idx]) links[idx].classList.add('active');
  }
  window.scrollTo(0, 0);
  if (name === 'admin') { updateDashboard(); renderOrdersTable(); renderPortfolioAdmin(); renderMessages(); }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TOAST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function toast(msg, type='info') {
  const c = document.getElementById('toastContainer');
  const t = document.createElement('div');
  t.className = `toast ${type}`;
  t.textContent = msg;
  c.appendChild(t);
  requestAnimationFrame(() => { requestAnimationFrame(() => t.classList.add('show')); });
  setTimeout(() => { t.classList.remove('show'); setTimeout(() => t.remove(), 400); }, 3500);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  WORK / PORTFOLIO
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderWorkGrid(filter='all') {
  const grid = document.getElementById('workGrid');
  const items = filter === 'all' ? portfolio : portfolio.filter(p => p.cat === filter);
  grid.innerHTML = items.map((item, i) => `
    <div class="work-item" style="animation:fadeIn .4s ${i*0.07}s both">
      <div class="work-inner">
        <div class="work-mockup">
          <div class="mock-dot"></div>
          <div style="flex:1"></div>
          <div class="mock-line"></div>
          <div class="mock-line short"></div>
          <div class="mock-line" style="width:40%"></div>
        </div>
      </div>
      <div class="work-overlay">
        <h3>${item.title}</h3>
        <p>${item.desc.substring(0,40)}...</p>
      </div>
    </div>`).join('');
}

function filterWork(cat, el) {
  document.querySelectorAll('.filter-tabs .tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  renderWorkGrid(cat);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ORDER FORM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function selectProduct(card, name, price) {
  card.closest('.product-cards').querySelectorAll('.product-card').forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');
  if (name && PRICES[name]) { orderData.product = name; orderData.price = PRICES[name]; }
  updateSummary();
}

function selectSwatch(el, color) {
  el.closest('.color-swatches').querySelectorAll('.swatch').forEach(s => s.classList.remove('selected'));
  el.classList.add('selected');
  orderData.color = color;
  document.getElementById('sum-color').textContent = color;
}

function updateSummary() {
  const paper = document.getElementById('paperWeight')?.value || '400gsm';
  const qty = document.getElementById('orderQty')?.value || '50';
  const finish = document.getElementById('finishType')?.value || 'Soft Touch Matte';
  orderData.paper = paper; orderData.qty = parseInt(qty); orderData.finish = finish;
  const total = orderData.price + (PAPER_ADD[paper]||0) + (QTY_ADD[qty]||0);
  document.getElementById('sum-product').textContent = orderData.product;
  document.getElementById('sum-qty').textContent = qty + ' pcs';
  document.getElementById('sum-paper').textContent = paper;
  document.getElementById('sum-finish').textContent = finish;
  document.getElementById('sum-total').textContent = '$' + total;
}

function goToStep(n) { if (n < currentStep) nextStep(n); }

function nextStep(num) {
  [1,2,3,4].forEach(n => {
    const el = document.getElementById('form-step-' + n);
    const step = document.getElementById('s' + n);
    if (el) el.style.display = n === num ? 'block' : 'none';
    if (step) { step.classList.remove('active','done'); if (n === num) step.classList.add('active'); if (n < num) step.classList.add('done'); }
  });
  currentStep = num;
  document.querySelector('.order-layout').scrollIntoView({ behavior: 'smooth' });
}

function validateAndReview() {
  const fname = document.getElementById('fname').value.trim();
  const lname = document.getElementById('lname').value.trim();
  const email = document.getElementById('email').value.trim();
  let valid = true;
  [['fname',fname],['lname',lname],['email',email]].forEach(([id,val]) => {
    const el = document.getElementById(id);
    if (!val) { el.classList.add('error'); valid = false; }
    else el.classList.remove('error');
  });
  if (!valid) { toast('Please fill in all required fields', 'error'); return; }
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { document.getElementById('email').classList.add('error'); toast('Please enter a valid email', 'error'); return; }
  orderData.fname = fname; orderData.lname = lname; orderData.email = email;
  orderData.company = document.getElementById('company').value;
  orderData.primaryText = document.getElementById('primaryText').value;
  orderData.secondaryText = document.getElementById('secondaryText').value;
  orderData.extraNotes = document.getElementById('extraNotes').value;
  const total = orderData.price + (PAPER_ADD[orderData.paper]||0) + (QTY_ADD[String(orderData.qty)]||0);
  document.getElementById('reviewDetails').innerHTML = `
    <div class="summary-item"><span class="summary-item-label">Customer</span><span>${fname} ${lname}</span></div>
    <div class="summary-item"><span class="summary-item-label">Email</span><span>${email}</span></div>
    <div class="summary-item"><span class="summary-item-label">Product</span><span>${orderData.product}</span></div>
    <div class="summary-item"><span class="summary-item-label">Quantity</span><span>${orderData.qty} pcs</span></div>
    <div class="summary-item"><span class="summary-item-label">Paper</span><span>${orderData.paper} ¬∑ ${orderData.finish}</span></div>
    <div class="summary-item"><span class="summary-item-label">Color</span><span>${orderData.color}</span></div>
    <div class="summary-item"><span class="summary-item-label">Typography</span><span>${orderData.typography}</span></div>
    ${orderData.primaryText ? `<div class="summary-item"><span class="summary-item-label">Primary Text</span><span>${orderData.primaryText}</span></div>` : ''}
    <div class="summary-total"><span>Est. Total</span><span>$${total}</span></div>`;
  nextStep(4);
}

async function submitOrder() {
  const btn = document.getElementById('submitBtn');
  btn.disabled = true; btn.textContent = 'Submitting...';
  const total = orderData.price + (PAPER_ADD[orderData.paper]||0) + (QTY_ADD[String(orderData.qty)]||0);
  const order = {
    id: 'ORD-' + String(orders.length + 1).padStart(3,'0'),
    date: new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}),
    customer: `${orderData.fname} ${orderData.lname}`,
    email: orderData.email,
    product: orderData.product,
    qty: orderData.qty,
    paper: orderData.paper,
    finish: orderData.finish,
    color: orderData.color,
    typography: orderData.typography,
    primaryText: orderData.primaryText,
    notes: orderData.notes + ' ' + orderData.extraNotes,
    total: '$' + total,
    status: 'New',
    company: orderData.company,
  };
  orders.unshift(order);
  await saveToStorage('folio-orders', orders);
  updateCartBadge();
  document.querySelector('.order-form-wrap').innerHTML = `
    <div style="text-align:center;padding:80px 0">
      <div style="font-family:'Cormorant Garamond',serif;font-size:80px;margin-bottom:16px;color:var(--accent)">‚úì</div>
      <h2 style="font-family:'Cormorant Garamond',serif;font-size:36px;font-weight:300;margin-bottom:16px">Order Received</h2>
      <p style="font-size:12px;color:var(--muted);line-height:1.9;max-width:380px;margin:0 auto 8px">Thank you, ${orderData.fname}! Your order <strong>${order.id}</strong> has been submitted.</p>
      <p style="font-size:11px;color:var(--muted);margin-bottom:40px">We'll reach out to ${orderData.email} within 24 hours with your design proof.</p>
      <div style="display:flex;gap:16px;justify-content:center">
        <button class="btn-ghost" onclick="showPage('home')">‚Üê Back to Home</button>
        <button class="btn-primary" onclick="showPage('admin')">View in Admin ‚Üó</button>
      </div>
    </div>`;
  toast('Order ' + order.id + ' submitted successfully!', 'success');
  updateStatCounter();
}

function updateCartBadge() {
  const newCount = orders.filter(o => o.status === 'New').length;
  const badge = document.getElementById('cartBadge');
  if (newCount > 0) { badge.style.display = 'flex'; badge.textContent = newCount; }
  else badge.style.display = 'none';
}

function updateStatCounter() {
  const el = document.getElementById('statOrders');
  const target = orders.length + 200;
  let current = 0;
  const step = Math.ceil(target / 40);
  const iv = setInterval(() => {
    current = Math.min(current + step, target);
    el.textContent = current + '+';
    if (current >= target) clearInterval(iv);
  }, 30);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  CONTACT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function sendContact() {
  const name = document.getElementById('cname').value.trim();
  const email = document.getElementById('cemail').value.trim();
  const msg = document.getElementById('cmessage').value.trim();
  if (!name || !email || !msg) { toast('Please fill in all fields', 'error'); return; }
  const message = { id: 'MSG-' + String(messages.length+1).padStart(3,'0'), date: new Date().toLocaleDateString('en-US',{month:'short',day:'numeric'}), name, email, subject: document.getElementById('csubject').value, message: msg, read: false };
  messages.unshift(message);
  await saveToStorage('folio-messages', messages);
  document.querySelector('.contact-wrap').innerHTML = `
    <div style="text-align:center;padding:60px 0">
      <div style="font-family:'Cormorant Garamond',serif;font-size:48px;margin-bottom:16px;color:var(--accent)">‚úâ</div>
      <h3 style="font-family:'Cormorant Garamond',serif;font-size:28px;font-weight:300;margin-bottom:12px">Message Sent</h3>
      <p style="font-size:12px;color:var(--muted);line-height:1.9">We'll get back to ${name} within 24 hours.</p>
    </div>`;
  toast('Message sent!', 'success');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ADMIN DASHBOARD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateDashboard() {
  document.getElementById('dash-total').textContent = orders.length;
  document.getElementById('dash-new').textContent = orders.filter(o=>o.status==='New').length;
  const rev = orders.reduce((a,o) => a + parseInt((o.total||'$0').replace(/\D/g,'')), 0);
  document.getElementById('dash-revenue').textContent = '$' + rev.toLocaleString();
  document.getElementById('dash-messages').textContent = messages.length;
  document.getElementById('dash-change').textContent = orders.length > 0 ? `‚Üë ${orders.length} total` : '‚Äî No orders yet';
  updateCartBadge();
  // Recent orders (5)
  const recent = orders.slice(0, 5);
  document.getElementById('recentOrdersTable').innerHTML = buildOrdersTable(recent);
}

function buildOrdersTable(data) {
  if (!data.length) return `<div style="padding:40px;text-align:center;color:var(--muted);font-size:12px;border:1px solid var(--light)">No orders yet. Orders from your form will appear here.</div>`;
  return `<table class="orders-table">
    <thead><tr><th>Order ID</th><th>Customer</th><th>Product</th><th>Total</th><th>Date</th><th>Status</th><th>Actions</th></tr></thead>
    <tbody>${data.map(o => `
      <tr>
        <td style="font-family:'Cormorant Garamond',serif;font-size:14px">${o.id}</td>
        <td>${o.customer}<br><span style="font-size:9px;color:var(--muted)">${o.email}</span></td>
        <td>${o.product} √ó ${o.qty}</td>
        <td>${o.total}</td>
        <td style="color:var(--muted)">${o.date}</td>
        <td><span class="status-badge ${o.status.toLowerCase().replace(' ','-')}">${o.status}</span></td>
        <td><div class="action-btns">
          <button class="action-btn" onclick="viewOrder('${o.id}')">View</button>
          <button class="action-btn danger" onclick="deleteOrder('${o.id}')">Delete</button>
        </div></td>
      </tr>`).join('')}
    </tbody></table>`;
}

function renderOrdersTable() {
  const search = (document.getElementById('orderSearch')?.value||'').toLowerCase();
  const status = document.getElementById('statusFilter')?.value||'';
  let filtered = orders.filter(o => {
    const matchSearch = !search || o.customer.toLowerCase().includes(search) || o.id.toLowerCase().includes(search) || o.product.toLowerCase().includes(search);
    const matchStatus = !status || o.status === status;
    return matchSearch && matchStatus;
  });
  document.getElementById('ordersTableWrap').innerHTML = buildOrdersTable(filtered);
}

function renderPortfolioAdmin() {
  const grid = document.getElementById('portfolioAdmin');
  grid.innerHTML = portfolio.map(p => `
    <div class="portfolio-item-admin">
      <h4>${p.title}</h4>
      <p>${p.cat} ‚Äî ${p.desc}</p>
      <div style="display:flex;gap:8px">
        <button class="action-btn" onclick="editPortfolioItem('${p.id}')">Edit</button>
        <button class="action-btn danger" onclick="deletePortfolioItem('${p.id}')">Remove</button>
      </div>
    </div>`).join('') +
    `<div class="add-portfolio-card" onclick="openAddPortfolioModal()">
      <span style="font-size:28px">+</span>
      <span style="font-size:10px;letter-spacing:.12em;text-transform:uppercase">Add New Work</span>
    </div>`;
}

function renderMessages() {
  const wrap = document.getElementById('messagesWrap');
  if (!messages.length) { wrap.innerHTML = `<div style="padding:40px;text-align:center;color:var(--muted);font-size:12px;border:1px solid var(--light)">No messages yet.</div>`; return; }
  wrap.innerHTML = `<table class="orders-table">
    <thead><tr><th>ID</th><th>From</th><th>Subject</th><th>Message</th><th>Date</th><th>Actions</th></tr></thead>
    <tbody>${messages.map(m => `
      <tr style="${!m.read ? 'font-weight:500' : ''}">
        <td>${m.id}</td>
        <td>${m.name}<br><span style="font-size:9px;color:var(--muted)">${m.email}</span></td>
        <td>${m.subject}</td>
        <td style="color:var(--muted)">${m.message.substring(0,60)}...</td>
        <td style="color:var(--muted)">${m.date}</td>
        <td><div class="action-btns">
          <button class="action-btn" onclick="markRead('${m.id}')">‚úì Read</button>
          <button class="action-btn danger" onclick="deleteMessage('${m.id}')">Delete</button>
        </div></td>
      </tr>`).join('')}
    </tbody></table>`;
}

function switchAdminTab(tab, el) {
  document.querySelectorAll('.admin-tab').forEach(t=>t.classList.remove('active'));
  if(el) el.classList.add('active');
  ['overview','orders','portfolio','messages'].forEach(t => {
    const el = document.getElementById('admin-'+t);
    if(el) el.style.display = t===tab ? 'block' : 'none';
  });
  if(tab==='orders') renderOrdersTable();
  if(tab==='portfolio') renderPortfolioAdmin();
  if(tab==='messages') renderMessages();
}

function viewOrder(id) {
  const o = orders.find(x => x.id === id);
  if (!o) return;
  document.getElementById('modalOrderTitle').textContent = o.id + ' ‚Äî ' + o.customer;
  document.getElementById('modalOrderBody').innerHTML = `
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:24px">
      ${[['Customer',o.customer],['Email',o.email],['Company',o.company||'‚Äî'],['Product',o.product],['Quantity',o.qty+' pcs'],['Paper',o.paper],['Finish',o.finish],['Color',o.color],['Typography',o.typography],['Total',o.total],['Date',o.date],['Status',o.status]].map(([l,v])=>`
      <div style="border:1px solid var(--light);padding:14px">
        <div style="font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:5px">${l}</div>
        <div style="font-size:12px">${v}</div>
      </div>`).join('')}
    </div>
    ${o.notes ? `<div style="border:1px solid var(--light);padding:16px"><div style="font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:8px">Notes</div><div style="font-size:12px;line-height:1.7;color:var(--muted)">${o.notes}</div></div>` : ''}
    <div style="margin-top:20px">
      <label style="display:block;margin-bottom:8px">Update Status</label>
      <select id="statusSelect" style="max-width:200px">
        ${['New','In Progress','Completed','Pending'].map(s=>`<option ${o.status===s?'selected':''}>${s}</option>`).join('')}
      </select>
    </div>`;
  document.getElementById('modalUpdateBtn').onclick = async () => {
    const newStatus = document.getElementById('statusSelect').value;
    o.status = newStatus;
    await saveToStorage('folio-orders', orders);
    closeModal('orderModal'); updateDashboard(); renderOrdersTable();
    toast('Order ' + id + ' updated to ' + newStatus, 'success');
  };
  document.getElementById('orderModal').classList.add('open');
}

async function deleteOrder(id) {
  if (!confirm('Delete order ' + id + '?')) return;
  orders = orders.filter(o => o.id !== id);
  await saveToStorage('folio-orders', orders);
  updateDashboard(); renderOrdersTable();
  toast('Order deleted', 'info');
}

async function markRead(id) {
  const m = messages.find(x => x.id === id);
  if (m) { m.read = true; await saveToStorage('folio-messages', messages); renderMessages(); updateDashboard(); }
}

async function deleteMessage(id) {
  messages = messages.filter(m => m.id !== id);
  await saveToStorage('folio-messages', messages);
  renderMessages(); updateDashboard();
  toast('Message deleted', 'info');
}

function openAddPortfolioModal() { document.getElementById('portfolioModal').classList.add('open'); }

async function addPortfolioItem() {
  const title = document.getElementById('pTitle').value.trim();
  if (!title) { toast('Title is required', 'error'); return; }
  const item = { id:'p'+Date.now(), title, cat: document.getElementById('pCat').value, desc: document.getElementById('pDesc').value || 'Custom stationery project' };
  portfolio.push(item);
  await saveToStorage('folio-portfolio', portfolio);
  renderPortfolioAdmin(); renderWorkGrid();
  closeModal('portfolioModal');
  toast('Portfolio item added!', 'success');
  document.getElementById('pTitle').value = ''; document.getElementById('pDesc').value = '';
}

async function deletePortfolioItem(id) {
  if (!confirm('Remove this portfolio item?')) return;
  portfolio = portfolio.filter(p => p.id !== id);
  await saveToStorage('folio-portfolio', portfolio);
  renderPortfolioAdmin(); renderWorkGrid();
  toast('Item removed', 'info');
}

function editPortfolioItem(id) { toast('Edit feature ‚Äî coming soon!', 'info'); }

function closeModal(id) { document.getElementById(id).classList.remove('open'); }
document.querySelectorAll('.modal-overlay').forEach(m => m.addEventListener('click', e => { if(e.target===m) m.classList.remove('open'); }));

function exportOrders() {
  if (!orders.length) { toast('No orders to export', 'info'); return; }
  const cols = ['id','date','customer','email','company','product','qty','paper','finish','color','total','status'];
  const csv = [cols.join(','), ...orders.map(o => cols.map(c => `"${(o[c]||'').toString().replace(/"/g,'""')}"`).join(','))].join('\n');
  const a = document.createElement('a'); a.href = 'data:text/csv,' + encodeURIComponent(csv); a.download = 'folio-orders.csv'; a.click();
  toast('Exported ' + orders.length + ' orders', 'success');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  AI ASSISTANT (Claude API)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function toggleAI() {
  aiOpen = !aiOpen;
  document.getElementById('aiPanel').classList.toggle('open', aiOpen);
  document.getElementById('aiTrigger').classList.toggle('hidden', aiOpen);
  if (aiOpen) document.getElementById('aiInput').focus();
}

function aiQuick(msg) {
  document.getElementById('aiInput').value = msg;
  sendAI();
}

async function sendAI() {
  const input = document.getElementById('aiInput');
  const msg = input.value.trim();
  if (!msg) return;
  appendAIMsg(msg, 'user');
  input.value = '';
  document.getElementById('aiSendBtn').disabled = true;
  aiHistory.push({ role:'user', content: msg });

  // Typing indicator
  const typingEl = document.createElement('div');
  typingEl.className = 'ai-msg loading';
  typingEl.innerHTML = '<div class="typing-dots"><span></span><span></span><span></span></div>';
  document.getElementById('aiMessages').appendChild(typingEl);
  scrollAI();

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        model:'claude-sonnet-4-20250514',
        max_tokens:1000,
        system:`You are the helpful assistant for Folio, a premium custom stationery studio. You help customers choose products, understand the design process, pick paper types, and place orders. Keep answers warm, concise, and elegant ‚Äî matching the studio's minimal modern brand. 

Key facts about Folio:
- Products: Business cards, notebooks, envelopes, notepads, letterheads, full sets
- Paper options: 300gsm Standard, 400gsm Premium, 500gsm Luxury Cotton Rag
- Finishes: Uncoated Matte, Soft Touch Matte, Cotton Rag, Letterpress Textured
- Turnaround: ~14 days after proof approval
- Process: Order ‚Üí Design Proof (5 days) ‚Üí Approval ‚Üí Production ‚Üí Delivery
- Payment: Only after proof approval
- Pricing starts at $95 for envelopes, up to $380 for full sets`,
        messages: aiHistory
      })
    });
    typingEl.remove();
    const data = await response.json();
    const reply = data.content?.map(c=>c.text||'').join('') || 'Sorry, I couldn\'t process that. Please try again.';
    aiHistory.push({ role:'assistant', content:reply });
    appendAIMsg(reply, 'assistant');
  } catch(e) {
    typingEl.remove();
    appendAIMsg('Sorry, I\'m having trouble connecting right now. Please try again in a moment.', 'assistant');
  }
  document.getElementById('aiSendBtn').disabled = false;
}

function appendAIMsg(text, role) {
  const msgs = document.getElementById('aiMessages');
  const el = document.createElement('div');
  el.className = `ai-msg ${role}`;
  el.textContent = text;
  msgs.appendChild(el);
  scrollAI();
}

function scrollAI() {
  const msgs = document.getElementById('aiMessages');
  msgs.scrollTop = msgs.scrollHeight;
}

async function getAIDesignIdea() {
  const notes = document.getElementById('designNotes').value;
  const prompt = `Give me 3 brief, creative design suggestions for ${orderData.product} stationery. Color: ${orderData.color}, Typography: ${orderData.typography}. ${notes ? 'Client notes: ' + notes : ''} Keep each suggestion to 1-2 sentences. Be specific and inspiring.`;
  document.getElementById('designNotes').value = 'Loading AI suggestions...';
  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        model:'claude-sonnet-4-20250514',
        max_tokens:1000,
        system:'You are a premium stationery design consultant for Folio studio. Give elegant, specific design suggestions.',
        messages:[{role:'user',content:prompt}]
      })
    });
    const data = await response.json();
    document.getElementById('designNotes').value = data.content?.map(c=>c.text||'').join('') || '';
    toast('AI design suggestions loaded!', 'success');
  } catch(e) {
    document.getElementById('designNotes').value = notes;
    toast('Could not load AI suggestions', 'error');
  }
}
</script>
</body>
</html>
